# Raw Data Files

The raw data files generated by running `wscan.py` or `vscan.py` are written by the `lcburst` utility compiled in the [lconfig](https://github.com/chmarti1/lconfig) system.  The Laboratory CONFIGuration system is a text-based data acquisition and data management system that automatically configures and executes experiments based on ASCII configuration files, and it writes those configuration parameters (and meta data) directly into the headers of the resulting data files.

The text below is taken from one of the data files in the experiment 5 collection.  This identifies which DAQ is to be used, how the connection will be formed, what sample rate will be used, which channel will be collected (AI1), and how they will be calibrated.  The `distream` directive also configured a single digital IO channel for streaming (DIO0).  As a result, the input stream will be a total of two channels; one analog and one digital.

```
# Configuration automatically generated by WRITE_CONFIG()
connection ethernet
#connection (actual) ?
device any
#device (actual) t7
name "LJ2"
serial "470014042"
ip "192.168.1.33"
samplehz 50000.000000
settleus 1.000000
nsample 100000

# Analog Inputs
aichannel 1
ainegative 199
airange 10.000000
airesolution 0
aicalslope 2.000000
aicalzero 0.000000
aicalunits "uA"

distream 1
# Meta Parameters
meta float
x 0.000000
y 7.000000
theta 0.227317
r 127.000000
vwire 20.000000
standoff 25.400000

meta string
who jas
rot ccw
meta end

## End Configuration ##
#: Mon Feb 17 16:58:50 2020
2.218073e-02	6.553400e+04
2.091784e-02	6.553400e+04
2.154929e-02	6.553400e+04
1.428767e-02	6.553400e+04
2.060212e-02	6.553400e+04
2.218073e-02	6.553400e+04
3.038952e-02	6.553400e+04
1.523484e-02	6.553400e+04
2.502223e-02	6.553400e+04
1.491912e-02	6.553400e+04
1.428767e-02	6.553400e+04
1.586629e-02	6.553400e+04
...
```


The first channel is the current signal.  The numbers in the data file are raw voltages produced by the "isoshunt" circuit introduced in the [wscan.md](wscan.md) documentation.  Prior to each experiment, that circuit was nulled and calibrated, and that calibration is recorded here as 2uA / V.  

The second channel is a floating point representation of the lowest 16 bits of the DIO channels.  The `distream` directive accepts a 16-bit integer bitmask identifying which DIO channels on the DAQ should be configured for input streaming.  Since decimal value 1 encodes to 0b0000000000000001, only DIO0 is enabled as an input.  In fact, DIO0 is wired to the photointerrupter, so changes in its state are used to know the location of the disc at specific points in time.  Observe that when the value 65,534 corresponds to 0b1111111111111110, so its initial state was zero when the data acquisition started.

The last header values are metadata inserted by `vscan.py` or `wscan.py`.  They define the conditions under which the experiment was conducted.

`x` and `y` indicate the coordinates of the translation stage.  `x` is the horizontal axis, is positive when the disc is moving towards to the torch, and is defined zero when the wire tip extends just barely over the work piece.  `y` is the vertical axis, is positive moving down (away from the torch in the direction of flow), and is defined zero when the wire just barely makes electrical contact with the lowest point on the torch.  It should be emphasized that these are in translation stage coordinates and NOT x,y,z torch-based coordinate system used later.

`theta` is the wire angle at the rising edge of the photointerrupter pulse, which is calculated by either `vscan.py` or `wscan.py`.  Which pulse should be used (there are two per rotation) is determined by the `use_long` parameter in [post1.py](post1.md).

`r` is the radius in mm from the center of disc rotation to the wire tip.

`vwire` is the bias voltage applied to the wire.

`standoff` is the standoff distance between the torch and work piece in mm.  This is the maximum possible value for the translation stage y-coordinate.

`who` contains the initials of the person taking the data.

`rot` is either `cw` or `ccw` indicating clockwise or counter-clockwise rotation of the disc.